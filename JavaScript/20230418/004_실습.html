<!DOCTYPE html>
<html lang="ko-KR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>실습</title>
</head>

<body>
  <h1>나의 todo list</h1>
  <p>1. 오늘 저녁에는 부대찌게를 끓여 먹겠다.
    <button type="button" class="delete-btn">삭제</button>
  </p>
  <p>2. 후식으로 슈팅스타를 먹겠다.
    <button type="button" class="delete-btn">삭제</button>
  </p>
  <p>3. 자기 전에 반드시 내일 아침 메뉴를 생각해두겠다.
    <button type="button" class="delete-btn">삭제</button>
  </p>


  <script>
    // JavaScript 코드
    const todo = document.querySelectorAll('p');
    const deleteBtns = document.querySelectorAll('.delete-btn');

    // p 태그 클릭 시 alert 창 띄우기
    todo.forEach(todo2 => {
      todo2.addEventListener('click', () => {
        alert(todo2.textContent.slice(3, -5));
      });
    });

    // 삭제 버튼 클릭 시 confirm 창 띄우기
    deleteBtns.forEach(e => {
      e.addEventListener('click', (el) => {
        if (confirm('정말 삭제할거얌?ㅇ?')) {
          e.parentElement.remove();
          el.stopPropagation()
        }
      });
    });
    // alert(todo.textContent.slice(3, -5)); 삭제글자 안나오게
    // el.stopPropagation() 이거 안넣으면, 삭제 버튼 눌렀을 때 alert 위에 박스도 뜸

//     이는 이벤트 버블링(Event Bubbling)이 발생하기 때문입니다.

// 이벤트 버블링은 한 요소에서 이벤트가 발생하면 해당 요소의 부모 요소들로 이벤트가 전파되는 현상입니다.즉, 자식 요소에서 이벤트가 발생하면 부모 요소들도 해당 이벤트를 감지하게 됩니다.

// 위의 코드에서는 < p > 태그와 < button > 태그 각각에 이벤트 리스너가 등록되어 있습니다. < button > 태그의 클릭 이벤트가 발생하면, 이벤트가 < button > 태그에서 시작되어 부모 요소인 < p > 태그로 이벤트가 전파됩니다.따라서 < p > 태그의 클릭 이벤트 리스너도 동시에 실행되어 < p > 태그의 텍스트가 alert 창으로 출력되는 현상이 발생합니다.

//       el.stopPropagation()을 사용하면 이벤트 버블링을 중단시킬 수 있습니다.위의 코드에서는 < button > 태그의 클릭 이벤트 리스너에 el.stopPropagation()이 추가되어 있어, <button> 태그의 클릭 이벤트가 <p> 태그로의 이벤트 전파를 중단시킵니다. 따라서 <p> 태그의 클릭 이벤트가 발생하지 않아, <p> 태그의 텍스트가 alert 창으로 출력되지 않게 됩니다.

    // //재영님
    // const btn = document.querySelectorAll('button');
    // const p = document.querySelectorAll('p')

    // p.forEach(el => {
    //   el.addEventListener('click', () => {
    //     alert(el.textContent.slice(0, -2))
    //   })
    // })
    // btn.forEach(el => {
    //   el.addEventListener('click', (e) => {

    //     if (confirm('삭제할검니가?')) {
    //       el.parentElement.remove()
    //       e.stopPropagation()
    //     }
    //   })
    // })


    // //동섭님
    // const todo = document.querySelectorAll('p')
    // const btn = document.querySelectorAll('button')
    // todo.forEach(item => {
    //   item.addEventListener('click', e => {
    //     alert(item.textContent.slice(3, -2));
    //   })
    // })
    // btn.forEach(item => {
    //   item.addEventListener('click', e => {
    //     confirm('정말 삭제하실건가요?') ? item.parentElement.remove() : ''
    //     e.stopPropagation();
    //   })
    // })


  </script>
  <!-- 위 코드에서는 querySelectorAll() 메소드를 사용하여 모든 p 태그와 삭제 버튼을 가져온 다음에, forEach() 메소드를 사용하여 각각의 태그에 대해 이벤트 리스너를 등록합니다.

  p 태그에 대한 이벤트 리스너에서는 textContent 속성을 이용하여 해당 p 태그의 내용을 alert 창에 띄우도록 구현합니다.
  
  삭제 버튼에 대한 이벤트 리스너에서는 parentElement 속성을 이용하여 해당 버튼의 부모 요소인 p 태그를 가져온 다음에, remove() 메소드를 사용하여 해당 요소를 삭제합니다. 이때, confirm() 메소드를 사용하여 정말로 삭제할 것인지를 확인하는 confirm 창을 띄워줍니다. -->

  <!-- slice() 메소드는 문자열에서 지정된 범위의 부분 문자열을 반환하는 JavaScript의 문자열 메소드입니다. 위의 코드에서 alert(el.textContent.slice(0, -2))는 <p> 태그의 텍스트 내용을 출력하기 위해 사용되었습니다.

    el.textContent는 해당 <p> 태그의 텍스트 내용을 반환하고, slice(0, -2)는 텍스트 내용의 처음부터 끝에서 두 번째 글자까지의 부분 문자열을 추출하는 역할을 합니다. 이렇게 구현한 이유는 <p> 태그 내용의 마지막에 위치한 "삭제" 텍스트를 제외하고 나머지 텍스트만을 출력하고자 했기 때문입니다. 예를 들어, <p> 태그의 텍스트 내용이 "1. 오늘 저녁에는 부대찌게를 끓여 먹겠다. 삭제"일 경우, slice(0, -2)를 사용하면 "1. 오늘 저녁에는 부대찌게를 끓여 먹겠다." 부분 문자열이 추출되어 alert 창에 출력됩니다. -->
</body>

</html>